function divide(e){var t=e.text(),n=/\s*\/\s*/,s=t.split(/\s*\/\s*/),a="";a+="<ul>";for(var i=0;i<s.length;i++)a=a+"<li>"+s[i]+"</li>";a+="</ul>",e[0].innerHTML=a}function app(){function e(e){return Math.floor(Math.random()*e)}function t(e){for(var t=e.length,n,s;0!==t;)s=Math.floor(Math.random()*t),t-=1,n=e[t],e[t]=e[s],e[s]=n;return e}function n(e,t){return 3===t?e.parentNode.parentNode.parentNode:4===t?e.parentNode.parentNode.parentNode.parentNode:5===t?e.parentNode.parentNode.parentNode.parentNode.parentNode:6===t?e.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode:void 0}function s(e){y=N.children[e],u.insertBefore(y,$(".question")[0])}function a(){for(var e=0;e<audioButton.length;e++)audioButton[e]===audioButton[g]&&(currentAudioButton=e);if(audioButton.length>0&&currentAudioButton===g&&void 0!==audioButton[g])return!0}function i(){function e(){$("#stage")[0]&&(style1=window.getComputedStyle($("#stage")[0]),heightWords=style1.getPropertyValue("height"),heightWordsLow=parseInt(heightWords,10)),$("div.container.active")[0]&&(style2=window.getComputedStyle($("div.container.active")[0]),heightContainer=style2.getPropertyValue("height"),heightContainerLow=parseInt(heightContainer,10),$(".myButt").css("margin-top",Math.floor((heightContainerLow-heightWordsLow)/3)+"px"),console.log("window width is less than 568px"))}function t(){$("#stage")[0]&&(style3=window.getComputedStyle($("#stage")[0]),heightWords=style3.getPropertyValue("height")),heightWordsHigh=parseInt(heightWords,10),$("div.container.active")[0]&&(style4=window.getComputedStyle($("div.container.active")[0]),heightContainer=style4.getPropertyValue("height")),heightContainerHigh=parseInt(heightContainer,10),$(".myButt").css("margin-top",Math.floor((heightContainerHigh-heightWordsHigh)/6)+"px"),console.log("window width is at least 568px")}function n(){function n(n){n.matches?e():t()}if(matchMedia){var s=window.matchMedia("(max-width: 567px)");s.addListener(n),n(s)}}function s(){function n(n){n.matches?e():t()}if(matchMedia){var s=window.matchMedia("(max-width: 769px)");s.addListener(n),n(s)}}""===$("#words")[0].innerHTML?($(".myButt").css("display","block"),$(".myButt div")[1].textContent="CHECK",$(".layer")[0].classList.remove("active"),$(".layer")[0].textContent="BUTT",matchMedia("(min-width: 768px)").matches&&s(),matchMedia("(min-width: 320px) and (max-width: 737px)").matches&&n()):($(".myButt").css("display","none"),$(".myButt")[0].style.marginTop=null)}function r(e){var t=$(this),n=t.nextAll(),s=t.index();if("words"===t.parent().attr("id"))t.appendTo($("#stage"));else if("stage"===t.parent().attr("id")&&"click"===e.type){for(t.appendTo($("#words")),t[0].className="",console.log(t[0]),n.appendTo($("#words")),L=0;L<n.length;L++)n[L].className="";$("#stage>span").nextAll().className=""}i(),$(".myButt div")[1].onclick=function(){$("#stage > span").length>1&&l(),$(".layer")[0].classList.add("active"),1===answers.length?$(".layer")[0].textContent="END":"YEAH"!==$(".layer")[0].textContent&&($(".layer")[0].textContent="NEXT")}}function o(){""===$("#words")[0].innerHTML&&(h=h.slice(0,-1))===answers[g]&&(count++,console.log(count+" right answer"))}function l(){function e(e){for(var t=0;t<e.length;t++)switch(!1){case"active-right"===e[t].className:return!1;break}return!0}$("#stage>span").each(function(e){$(this).text()===x[e]?(console.log($(this).text()),h=h+$(this).text()+"/",$(this)[0].className="active-right"):$(this)[0].className="active-wrong"}),h=h.substring(0,h.length-1),h===answers[g]?(console.log("Hello World"),count++,$(".layer")[0].textContent="YEAH",$("#stage").sortable("disable"),a()&&audioButton[g].classList.toggle("active")):($(".layer")[0].textContent="NEXT",e($("#stage span"))&&(a()&&audioButton[g].classList.toggle("active"),$("#stage").sortable("disable"))),$("#stage>span").unbind("click")}function d(){var e=0,t=Math.round(.35*questionMaxGlob),n=Math.round(.85*questionMaxGlob);if(count<=t&&count&&2!==questionMaxGlob)for(var s=0;s<$("#stage>span").length;s++)$("#stage>span")[s].classList.toggle("active-wrong");else if(count>t&&count<n||2===questionMaxGlob&&1===count)for(var s=0;s<$("#stage>span").length;s++)$("#stage>span")[s].classList.toggle("active-middle");else if(count>=n)for(var s=0;s<$("#stage>span").length;s++)$("#stage>span")[s].classList.toggle("active-right");else for(var s=0;s<$("#stage>span").length;s++)$("#stage>span")[s].classList.toggle("active-wrong")}var h="";if(void 0!==preArrayNode)var c=preArrayNode.parentNode;var g=e(answers.length),u=$(".question")[0].parentNode,p,f,N;$(".par>.midbt")[0]&&(p=$(".par>.midbt")[0],c.insertBefore(p,preArrayNode)),$(".par>.DEF")[0]&&(p=$(".par>.DEF")[0],preArrayNode.insertBefore(p,preArrayNode.children[2]));var m,v=!1;if(englishList&&englishList[g]&&englishList[g].parentNode)for(var L=0;L<englishList[g].parentNode.children.length;L++)"DEF"===englishList[g].parentNode.children[L].className&&(m=!0);if(englishList.length>0){"midbt"===defineWordClass&&(preArrayNode=n(englishList[g],3),N=n(englishList[g],4)),("DEF"===defineWordClass&&"Sense"===englishList[g].parentNode.className||"newline Sense"===englishList[g].parentNode.className)&&(preArrayNode=englishList[g].parentNode,N=englishList[g].parentNode),("DEF"===defineWordClass&&"Sense"===englishList[g].parentNode.parentNode.className||"newline Sense"===englishList[g].parentNode.parentNode.className)&&(preArrayNode=englishList[g].parentNode.parentNode,N=englishList[g].parentNode.parentNode),("DEF"===defineWordClass&&"Sense"===englishList[g].parentNode.parentNode.parentNode.className||"newline Sense"===englishList[g].parentNode.parentNode.parentNode.className)&&(preArrayNode=englishList[g].parentNode.parentNode,N=englishList[g].parentNode.parentNode),"DEF"===defineWordClass&&m&&(preArrayNode=englishList[g].parentNode,N=englishList[g].parentNode),"default"===defineWordClass&&(preArrayNode=englishList[g].parentNode,N=englishList[g].parentNode);var y;N.children[0]&&N.children[0].className===defineWordClass?s(0):N.children[1]&&N.children[1].className===defineWordClass?s(1):N.children[2]&&N.children[2].className===defineWordClass?s(2):N.children[3]&&N.children[3].className===defineWordClass?s(3):N.children[4]&&N.children[4].className===defineWordClass?s(4):N.children[5]&&N.children[5].className===defineWordClass?s(5):N.children[6]&&N.children[6].className===defineWordClass?s(6):N.children[7]&&N.children[7].className===defineWordClass?s(7):console.log("def not found"),console.log(englishList[g].textContent),console.log(answers[g]),console.log(g),console.log("anwers sum "+answers.length),console.log("englishList sum "+answers.length)}for(var L=0;L<russian.length;L++)russian[L]===russian[g]&&(currentRusArr=L);if(russian.length>0&&currentRusArr===g&&void 0!==russian[g])$(".russian")[0].style.display="inline-table",russian[g].style.display="inline-table";else for(var L=0;L<russian.length;L++)$(".russian")[0].style.display="none";var x=answers[g],w=x;void 0!==x&&(x=x.split("/"),t(x.slice()).forEach(function(e){$("#words").append("<span>"+e+"</span>")})),endOfTheWordsGlob=o,$("#words>span").on("click touchstart",r),$(function(){$("#stage").sortable({update:function(e,t){t.item.unbind("click"),t.item.one("click",function(e){console.log("one-time-click"),e.stopImmediatePropagation(),$(this).click(r)}),$(".myButt div")[1].textContent="CHECK",$(".layer")[0].classList.remove("active"),$(".layer")[0].textContent="BUTT",console.log("update")},delay:30})}),arrayNumberGlob=g;for(var L=0;L<$("#words>span").length;L++)if($("#words>span")[L].textContent===x[0]){$("#stage").append($("#words>span")[L]),$("#stage>span").unbind("click");break}if(answers.length>0&&($("#stage>span")[0].onclick=function(){$("#stage").append($("#words>span"));for(var e=0;e<x.length;e++)$("#stage>span")[e].textContent=x[e];i(),$("#stage > span").unbind("click"),$("#stage").sortable("disable"),$(".layer")[0].classList.add("active"),$(".layer")[0].textContent="NEXT",a()&&audioButton[g].classList.toggle("active"),1===answers.length&&($(".layer")[0].textContent="END")}),0===answers.length){var C=count+" correct from "+questionMax;C=C.split(" ");for(var L=0;L<C.length;L++){var b=document.createElement("span");console.log(C[L]),b.innerHTML=C[L],stage.appendChild(b)}d()}}$(".hide-examples")[0].innerHTML=$(".hide-examples")[0].innerHTML.replace(/<\/span> /g,"</span>");for(var audioButton,audioArr=[],i=0;i<$(".speaker>a").length;i++)audioArr[i]=$(".speaker")[i].innerHTML;if(0===$(".audio-front>a").length){for(var i=0;i<audioArr.length;i++)$(".audio-front")[0].innerHTML+=audioArr[i],$(".speaker")[i].innerHTML="";audioButton=$(".audio-front>span>a")}$(".audio-front>a").length>0&&(audioButton=$(".audio-front>a"));var examples=$(".hide-examples"),translation=$(".question>div"),englishList=[];englishList=$(".hide-examples>div>div>.vibs>.vib>ul>li");var defineWordClass="midbt";if(!englishList[0])for(var i=0;i<$("span.EXAMPLE").length;i++)"GramBox"!==$("span.EXAMPLE")[i].parentNode.parentNode.className&&"F2NBox"!==$("span.EXAMPLE")[i].parentNode.className&&(englishList.push($("span.EXAMPLE")[i]),defineWordClass="DEF");if(englishList[0]||(englishList=$(".hide-examples > ul > li")),examples.length>0&&void 0===englishList[0]&&divide(examples),translation.length>0&&void 0===$(".question>div>ul")[0]&&divide(translation),!englishList[0]){for(var i=0;i<$(".hide-examples > ul > li").length;i++)englishList.push($(".hide-examples > ul > li")[i]);var defineWordClass="default"}for(var russian=$(".question>div>ul>li"),z=0;z<englishList.length;z++)englishList[z].textContent=englishList[z].textContent.replace(/\[([^[]*)\]./g,""),englishList[z].textContent=englishList[z].textContent.replace(/\[([^[]*)\]/g,""),englishList[z].textContent=englishList[z].textContent.replace(/.\(([^[]*)\)/g,""),englishList[z].textContent=englishList[z].textContent.replace(/[\.]./g,"."),englishList[z].textContent=englishList[z].textContent.replace(/(\/\w*)/g,"");"deyault"===defineWordClass&&(englishList[z].textContent=englishList[z].textContent.replace(/\./g,".   "));for(var answers=[],i=0;i<englishList.length;i++){var arrEnglishList=englishList[i];arrEnglishList&&(answers[i]=arrEnglishList.textContent.split(" "),answers[i]=answers[i].join("/"))}app();var endOfTheWordsGlob,arrayNumberGlob,currentRusArr,currentAudioButton,count=0,questionMax=answers.length,questionMaxGlob=answers.length;switch(questionMax){case 1:questionMax="One";break;case 2:questionMax="Two";break;case 3:questionMax="Three";break;case 4:questionMax="Four";break;case 5:questionMax="Five";break;case 6:questionMax="Six";break;case 7:questionMax="Seven";break;case 8:questionMax="Eight";break;case 9:questionMax="Nine";break;case 10:questionMax="Ten";break}var preArrayNode;$(".myButt div")[0].onclick=function(e){if("NEXT"===$(".layer")[0].textContent||"YEAH"===$(".layer")[0].textContent||"END"===$(".layer")[0].textContent){endOfTheWordsGlob(),$("#words")[0].innerHTML="",russian.length>0&&currentRusArr===arrayNumberGlob&&void 0!==russian[arrayNumberGlob]&&(russian[arrayNumberGlob].style.display="none"),audioButton[arrayNumberGlob]&&audioButton[arrayNumberGlob].classList.remove("active"),answers.splice(arrayNumberGlob,1),russian.splice(arrayNumberGlob,1),englishList.splice(arrayNumberGlob,1),audioButton.splice(arrayNumberGlob,1);for(var t=document.getElementById("stage");t.firstChild;)t.removeChild(t.firstChild);$(".myButt").css("display","none"),console.log(russian.length),console.log("audioButton: "+audioButton.length),answers.length>0&&material(e),$(".myButt")[0].style.marginTop=null,$("#stage").sortable("option","disabled",!1),app()}};